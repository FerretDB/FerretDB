{
  "1-insert-text-data": {
    "request": {
      "insert": "books",
      "documents": [
        {
          "_id": "pride_prejudice_1813",
          "title": "Pride and Prejudice",
          "author": "Jane Austen",
          "summary": "The novel follows the story of Elizabeth Bennet, a spirited young woman navigating love, societal expectations, and family drama in 19th-century England."
        },
        {
          "_id": "moby_dick_1851",
          "title": "Moby Dick",
          "author": "Herman Melville",
          "summary": "The narrative follows Ishmael and his voyage aboard the whaling ship Pequod, commanded by Captain Ahab, who is obsessed with hunting the elusive white whale, Moby Dick."
        },
        {
          "_id": "frankenstein_1818",
          "title": "Frankenstein",
          "author": "Mary Shelley",
          "summary": "Victor Frankenstein, driven by an unquenchable thirst for knowledge, creates a living being, only to face tragic consequences as his creation turns monstrous."
        }
      ],
      "$db": "{{.Database}}"
    },
    "response": {
      "n": {
        "$numberInt": "0"
      },
      "ok": {
        "$numberDouble": "1.0"
      },
      "writeErrors": [
        {
          "index": {
            "$numberInt": "0"
          },
          "code": {
            "$numberInt": "11000"
          },
          "errmsg": "Duplicate key violation on the requested collection: Index '_id_'"
        }
      ]
    }
  },
  "2-create-text-index": {
    "request": {
      "createIndexes": "books",
      "indexes": [
        {
          "key": {
            "summary": "text"
          },
          "name": "summary_text_index"
        }
      ],
      "$db": "{{.Database}}"
    },
    "response": {
      "numIndexesBefore": {
        "$numberInt": "1"
      },
      "numIndexesAfter": {
        "$numberInt": "2"
      },
      "createdCollectionAutomatically": false,
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  },
  "3-basic-text-search": {
    "request": {
      "find": "books",
      "filter": {
        "$text": {
          "$search": "drama"
        }
      },
      "$db": "{{.Database}}"
    },
    "response": {
      "cursor": {
        "id": {
          "$numberLong": "0"
        },
        "ns": "{{.Database}}.books",
        "firstBatch": []
      },
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  },
  "4-compound-text-index": {
    "request": {
      "createIndexes": "books",
      "indexes": [
        {
          "key": {
            "title": "text",
            "summary": "text"
          },
          "name": "title_summary_text_index"
        }
      ],
      "$db": "{{.Database}}"
    },
    "response": {
      "ok": {
        "$numberDouble": "0.0"
      },
      "errmsg": "Expected exactly one text index. Requested index: { \"v\" : 2, \"key\" : { \"title\" : \"text\", \"summary\" : \"text\" }, \"name\" : \"title_summary_text_index\" }, existing index: { \"v\" : 2, \"key\" : { \"summary\" : \"text\" }, \"name\" : \"summary_text_index\" }",
      "code": {
        "$numberInt": "17194"
      },
      "codeName": "ExactlyOneTextIndex"
    }
  },
  "5-relevance-score": {
    "request": {
      "find": "books",
      "filter": {
        "$text": {
          "$search": "hunt whales"
        }
      },
      "projection": {
        "title": {
          "$numberInt": "1"
        },
        "author": {
          "$numberInt": "1"
        },
        "summary": {
          "$numberInt": "1"
        },
        "score": {
          "$meta": "textScore"
        }
      },
      "sort": {
        "score": {
          "$meta": "textScore"
        }
      },
      "$db": "{{.Database}}"
    },
    "response": {
      "cursor": {
        "id": {
          "$numberLong": "0"
        },
        "ns": "{{.Database}}.books",
        "firstBatch": [
          {
            "_id": "moby_dick_1851",
            "title": "Moby Dick",
            "summary": "Ishmael recounts his journey aboard the whaling ship Pequod under the leadership of the obsessed Captain Ahab, who is driven to exact revenge on the legendary white whale, Moby Dick. The novel delves into themes of human struggle against nature and the destructive power of obsession.",
            "score": {
              "$numberDouble": "2.0"
            }
          }
        ]
      },
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  }
}
