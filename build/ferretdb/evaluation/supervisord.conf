; https://supervisord.org/configuration.html#supervisord-section-values
[supervisord]
nodaemon=true
user=root
loglevel=debug
logfile=/dev/stderr
logfile_maxbytes=0

; https://supervisord.org/configuration.html#program-x-section-values
[program:postgres]
command=/bin/bash -x /usr/local/bin/docker-entrypoint.sh postgres
user=root
; lower priority postgres starts before ferretdb (default priority 999)
priority=1
; fast shutdown https://www.postgresql.org/docs/current/server-shutdown.html
stopsignal=INT
stdout_logfile=/dev/stderr
stdout_logfile_maxbytes=0
redirect_stderr=true

; https://supervisord.org/configuration.html#program-x-section-values
[program:ferretdb]
command=/usr/local/bin/ferretdb
user=root
stdout_logfile=/dev/stderr
stdout_logfile_maxbytes=0
redirect_stderr=true
