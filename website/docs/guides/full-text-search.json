{
  "1-insert-text-data": {
    "request": {
      "insert": "books-2",
      "documents": [
        {
          "_id": "pride_prejudice_1813",
          "title": "Pride and Prejudice",
          "author": "Jane Austen",
          "summary": "The novel follows the story of Elizabeth Bennet, a spirited young woman navigating love, societal expectations, and family drama in 19th-century England."
        },
        {
          "_id": "moby_dick_1851",
          "title": "Moby Dick",
          "author": "Herman Melville",
          "summary": "The narrative follows Ishmael and his voyage aboard the whaling ship Pequod, commanded by Captain Ahab, who is obsessed with hunting the elusive white whale, Moby Dick."
        },
        {
          "_id": "frankenstein_1818",
          "title": "Frankenstein",
          "author": "Mary Shelley",
          "summary": "Victor Frankenstein, driven by an unquenchable thirst for knowledge, creates a living being, only to face tragic consequences as his creation turns monstrous."
        }
      ],
      "$db": "{{.Database}}"
    },
    "response": {
      "n": {
        "$numberInt": "3"
      },
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  },
  "2-create-text-index": {
    "request": {
      "createIndexes": "books-2",
      "indexes": [
        {
          "key": {
            "summary": "text"
          },
          "name": "summary_text_index"
        }
      ],
      "$db": "{{.Database}}"
    },
    "response": {
      "numIndexesBefore": {
        "$numberInt": "1"
      },
      "numIndexesAfter": {
        "$numberInt": "2"
      },
      "createdCollectionAutomatically": false,
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  },
  "3-basic-text-search": {
    "request": {
      "find": "books-2",
      "filter": {
        "$text": {
          "$search": "drama"
        }
      },
      "$db": "{{.Database}}"
    },
    "response": {
      "cursor": {
        "id": {
          "$numberLong": "0"
        },
        "ns": "{{.Database}}.books-2",
        "firstBatch": [
          {
            "_id": "pride_prejudice_1813",
            "title": "Pride and Prejudice",
            "author": "Jane Austen",
            "summary": "The novel follows the story of Elizabeth Bennet, a spirited young woman navigating love, societal expectations, and family drama in 19th-century England."
          }
        ]
      },
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  },
  "4-drop-text-index": {
    "request": {
      "dropIndexes": "books-2",
      "index": "summary_text_index",
      "$db": "{{.Database}}"
    },
    "response": {
      "ok": {
        "$numberDouble": "0.0"
      },
      "errmsg": "[response.go:63 middleware.ResponseMsg] [op_msg.go:55 wire.NewOpMsg] [op_msg.go:85 wire.(*OpMsg).check] [raw_document.go:68 wirebson.RawDocument.DecodeDeep] [raw_document.go:78 wirebson.RawDocument.decode] [decode.go:65 wirebson.FindRaw] len(b) = 69, dl = 1313821506: wirebson: short input",
      "code": {
        "$numberInt": "1"
      },
      "codeName": "InternalError"
    }
  },
  "5-compound-text-index": {
    "request": {
      "createIndexes": "books-2",
      "indexes": [
        {
          "key": {
            "title": "text",
            "summary": "text"
          },
          "name": "title_summary_text_index"
        }
      ],
      "$db": "{{.Database}}"
    },
    "response": {
      "numIndexesBefore": {
        "$numberInt": "1"
      },
      "numIndexesAfter": {
        "$numberInt": "2"
      },
      "createdCollectionAutomatically": false,
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  },
  "5-relevance-score": {
    "request": {
      "find": "books-2",
      "filter": {
        "$text": {
          "$search": "hunt whales"
        }
      },
      "projection": {
        "title": {
          "$numberInt": "1"
        },
        "author": {
          "$numberInt": "1"
        },
        "summary": {
          "$numberInt": "1"
        },
        "score": {
          "$meta": "textScore"
        }
      },
      "sort": {
        "score": {
          "$meta": "textScore"
        }
      },
      "$db": "{{.Database}}"
    },
    "response": {
      "cursor": {
        "id": {
          "$numberLong": "0"
        },
        "ns": "{{.Database}}.books-2",
        "firstBatch": [
          {
            "_id": "moby_dick_1851",
            "title": "Moby Dick",
            "author": "Herman Melville",
            "summary": "The narrative follows Ishmael and his voyage aboard the whaling ship Pequod, commanded by Captain Ahab, who is obsessed with hunting the elusive white whale, Moby Dick.",
            "score": {
              "$numberDouble": "3.0"
            }
          }
        ]
      },
      "ok": {
        "$numberDouble": "1.0"
      }
    }
  }
}
