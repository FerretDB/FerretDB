# Release Checklist

## Preparation

1. Check tests, linters.
2. Check issues and pull requests, update milestones and labels.
3. Check if there are breaking changes or anything that should be reflected in the changelog and/or user documentation.
4. Create draft release on GitHub with autogenerated release notes.
5. Tweak generated release notes:
   - Ensure that "This section should be empty" section does not exist.
   - Add "All closed issues and pull requests" and "All commits", remove "Full Changelog".
   - Tweak spacing, headers levels.
   - Sort items within sections according to importance and/or alphabetically.
6. Update CHANGELOG.md with the same release notes:
   - Check spacing, header levels.
   - Run `task docs-fmt`.
7. Commit and push changes, check `git status`.

## Git tag

1. Make a signed tag `vX.Y.Z` with the relevant section of the changelog using `--cleanup=verbatim`.
2. Check `task gen-version; git status` output.
3. Push it!
4. Refresh
   - `env GOPROXY=https://proxy.golang.org go mod download -x github.com/FerretDB/FerretDB@<tag>`
   - `https://pkg.go.dev/github.com/FerretDB/FerretDB@<tag>` from <https://pkg.go.dev/github.com/FerretDB/FerretDB?tab=versions>

## Release

1. Trim draft release notes.
2. Wait for the [packages CI build](https://github.com/FerretDB/FerretDB/actions/workflows/packages.yml?query=event%3Apush)
   to finish.
3. Upload binaries and packages to the draft release.
4. Check:
   - <https://hub.docker.com/r/ferretdb/ferretdb/tags>
   - <https://hub.docker.com/r/ferretdb/ferretdb-dev/tags>
   - <https://hub.docker.com/r/ferretdb/all-in-one/tags>
   - <https://github.com/FerretDB/FerretDB/pkgs/container/ferretdb>
   - <https://github.com/FerretDB/FerretDB/pkgs/container/ferretdb-dev>
   - <https://github.com/FerretDB/FerretDB/pkgs/container/all-in-one>
   - <https://quay.io/repository/ferretdb/ferretdb?tab=tags>
   - <https://quay.io/repository/ferretdb/ferretdb-dev?tab=tags>
   - <https://quay.io/repository/ferretdb/all-in-one?tab=tags>
5. Close milestone in issues.
6. Publish release on GitHub.
7. Announce it on Slack.

## Soon after

1. Bump the latest version on [Beacon](https://beacon.ferretdb.io).
2. Publish and announce blog post.
3. Tweet, toot.
4. Update NixOS package: <https://github.com/NixOS/nixpkgs/tree/master/pkgs/servers/nosql/ferretdb>.
5. Update Civo package: <https://github.com/civo/kubernetes-marketplace/tree/master/ferretdb>.
